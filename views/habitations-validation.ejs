<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head') %>
        <link rel='stylesheet' href='/stylesheets/habitations.css' />

        <link rel="stylesheet/css" type="text/css"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />

        <link rel="stylesheet/css" type="text/css"
            href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" />

        <%- include('partials/scripts') %>
</head>


<body>
    <%- include('partials/nav') %>
        <div class="container-lg" id="container-table">
            <h1 class="mt-5 mb-5"><i class="fa-solid fa-location-dot" aria-hidden="true"></i> Liste des habitations
            </h1>
            <!-- Boutons radio -->
            <div class="button-container">

                <div class="button-radio">
                    <a href="/habitations/validation/">
                        <input type="radio" name="radio" id="radio1" class="radio"
                            <%=(url.includes('/habitations/validation/')) ? '' : 'checked' %> />
                        <label for="radio1">Toutes</label>
                    </a>
                </div>
                <div class="button-radio">
                    <a href="/habitations/validation/Mouscron">
                        <input type="radio" name="radio" id="radio2" class="radio"
                            <%=(url.includes('/habitations/validation/Mouscron')) ? '' : 'checked' %> />
                        <label for="radio2">Moucron</label>
                    </a>
                </div>
                <div class="button-radio">
                    <a href="/habitations/validation/Dottignies">
                        <input type="radio" name="radio" id="radio3" class="radio"
                            <%=(url.includes('/habitations/validation/Dottignies')) ? '' : 'checked' %> />
                        <label for="radio3">Dottignies</label>
                    </a>
                </div>
                <div class="button-radio">
                    <a href="/habitations/validation/Luingne">
                        <input type="radio" name="radio" id="radio4" class="radio"
                            <%=(url.includes('/habitations/validation/Luingne')) ? '' : 'checked' %> />
                        <label for="radio4">Luingne</label>
                    </a>
                </div>
                <div class="button-radio">
                    <a href="/habitations/validation/Herseaux">
                        <input type="radio" name="radio" id="radio5" class="radio"
                            <%=(url.includes('/habitations/validation/Herseaux')) ? '' : 'checked' %> />
                        <label for="radio5">Herseaux</label>
                    </a>
                </div>

            </div>


            <a href="/habitations/validation/Luingne"><button>ESSAI LUINGNE</button></a>
            <!-- <script>
                const currentUrl = window.location.href;
                const buttons = document.querySelectorAll('.button-radio a');

                buttons.forEach(button => {
                    const buttonUrl = button.getAttribute('href');
                    const input = button.querySelector('input');
                    if (buttonUrl === currentUrl) {
                        input.setAttribute('checked', true);
                    } else {
                        input.setAttribute('checked', false);
                    }
                });
            </script> -->
            <!-- Liste des habitations -->

            <div class="container mt-5">
                <% habitations.forEach((habitation)=> {
                    var color;
                    if(habitation.localite=='Mouscron'){
                    color='blue';
                    }
                    else if(habitation.localite=='Dottignies'){
                    color = 'green';
                    }
                    else if(habitation.localite=='Herseaux'){
                    color= 'red';
                    }
                    else if(habitation.localite=='Luingne'){
                    color= 'yellow';
                    }
                    %>



                    <article class="postcard light <%=color%>">
                        <a class="postcard__img_link" href="#">
                            <img class="postcard__img" src="/img/<%=habitation.localite%>.jpg" alt="Image Title" />
                        </a>
                        <div class="mypostcard">
                            <div class="postcard__text t-dark">
                                <h1 class="postcard__title blue"><a href="#">
                                        <%=habitation.adresse %>
                                    </a></h1>
                                <div class="postcard__subtitle small">
                                    <time datetime="2020-05-25 12:00:00">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        <%= habitation.datedebut %>
                                    </time><br>
                                    <time datetime="2020-05-25 12:00:00">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        <%= habitation.datefin %>
                                    </time>
                                </div>
                                <div class="postcard__bar"></div>
                                <div class="postcard__applicant">

                                    <i class="fas fa-user-alt"></i> Demandeur:
                                    <%= habitation.demandeur %>
                                </div><br>
                                <div class=" postcard__preview-txt">

                                    <% let mesures=habitation.mesures %>
                                        <%=mesures.split("-").join("\n"); %>

                                </div>
                                <ul class="postcard__tagbox">
                                    <li class="tag__item"><i class="fas fa-tag mr-2"></i>
                                        <%=habitation.localite%>
                                    </li>
                                    <li class="tag__item"><i class="fas fa-clock mr-2"></i> x jours restant</li>
                                    <li class="tag__item play blue">
                                        <a href="#"><i class="fas fa-play mr-2"></i> Valider l'habitation</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </article>


                    <% }) %>

            </div>
        </div>


        <%- include('partials/footer') %>

            <%- include('partials/scripts') %>
</body>

</html>